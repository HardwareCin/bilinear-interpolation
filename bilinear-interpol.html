<!DOCTYPE html>
<html>
<head>
<script src="http://cdnjs.cloudflare.com/ajax/libs/bonsai/0.4/bonsai.min.js"></script>
<div id="movie"></div>
<script>
  bonsai.run(document.getElementById('movie'), {
    code: function() {
      var points = [];
      var background = {};
      var point_rad = 3;
      var param = 0.005;
      var path = {};

      function connect() {
        var path = new Path(points)
          .stroke('navy', 2);
        path.addTo(stage);
        if(points.length==8) {
          path.closePath();
        }
      }
      

      background = new Bitmap('/home/pedro/Textura.bmp').on('load', function() {
  		  this.addTo(stage);
      });
      
      background.on('click', function(e) {
        points.push(e.x);
        points.push(e.y);
        var circ = new Circle(e.x, e.y, point_rad)
          .fill('navy');
        if(points.length>2) {
          connect();
        }
        circ.addTo(stage);
      });

      function bilinearInterpolation() {
  
      }
    },
    width: 1000,
    height: 1000
});
</script>
</head>
</html>
